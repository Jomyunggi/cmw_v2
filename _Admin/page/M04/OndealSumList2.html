<script type="text/javascript" src="<?php	echo JS_DIR;	?>/adm_common.js"></script>

<script>
	$(document).ready(function(){
		$('#totalPrice').html(<?php echo $totalPrice;?>);
	});

	function searchSubmit(){
		var frm = document.search_frm;
		frm.submit();
	}

	function searching(){
		window.location.href="/?M0401S&searchYear="+$('#searchYear').val()+"&searchMonth="+$('#searchMonth').val();
	}
</script>
<div class="container"  style="width:100%;">
	<div class="contents-wrapper">
		<h2 class="page-header">온라인 결제일별 통계</h2>
	</div>

	<!--/* 해당 월 일별 합계  --------------------------------------------------------------------------------------------------------------------->
	<div class="contents-wrapper" style='float:left; width:100%;'>
		<div class="panel panel-default">
			<div class="panel-heading text-center">
				<?php 
					echo $M_HTML->b_Form("search_frm", "", "get", 0);
					echo $M_HTML->input_Hidden($MENU_ID.$P_ACTION, "");
					echo $M_HTML->input_Hidden("PAGE", $PAGE);
				?>
				<div class="form-inline">
					<div class="form-group">
						<?php	echo $M_HTML->_Select2("searchYear", $this->searchYear, $searchYear, "form-control");	?>
						<?php	echo $M_HTML->_Select2("searchMonth", $this->searchMonth, $searchMonth, "form-control", "onchange='searching()'");	?>
					</div>
				</div>
				<?php
					echo $M_HTML->e_Form();
				?>
			</div>
			<table class="table table-bordered table-hover">
				<colgroup>
					<col width="14%">
					<col width="14%">
					<col width="14%">
					<col width="14%">
					<col width="14%">
					<col width="14%">
					<col width="14%">
				</colgroup>
				<thead>
					<tr>
						<th style="background-color:red; color:white; padding:2px;">일</th>
						<th style="background-color:#BDBDBD; padding:2px;">월</th>
						<th style="background-color:#BDBDBD; padding:2px;">화</th>
						<th style="background-color:#BDBDBD; padding:2px;">수</th>
						<th style="background-color:#BDBDBD; padding:2px;">목</th>
						<th style="background-color:#BDBDBD; padding:2px;">금</th>
						<th style="background-color:red; color:white; padding:2px;">토</th>
					</tr>
					
				<?php
					//$tr_arr			= array(0, 6, 7, 13, 14, 20, 21, 27, 28, 34, 35, 41);
					$day = 1;
					for($i=0; $i<42; $i++){
						if(strlen($searchMonth) < 2) $date = $searchYear."0".$searchMonth."01";
						else $date = $searchYear.$searchMonth."01";

						if($i%7 == 0) echo "<tr>";

						while(date('w', strtotime($date)) > $i){
							echo "<td></td>";
							$i++;
						}

						if($day <= $this->monthByDay[$searchMonth]){
							$selectDate = strlen($day) < 2 ? substr($date, 0, 6)."0".$day : substr($date, 0, 6).$day;
				?>
						<td data-href="?M0403&searchDelivery=0&searchTerm=11&date=<?php echo $selectDate;?>" style='padding:3px;'><?php echo $day; ?>.</br>
				<?php
							$totalPrice = 0;
							for($j=0; $j<sizeof($dayPriceArr[$day]); $j++){
						
								$totalPrice += (int)$dayPriceArr[$day][$j]['price'];

								echo "<div class='calender_left'>".$dayPriceArr[$day][$j]['name']."</div><div class='calender_right'>".number_format($dayPriceArr[$day][$j]['price'])."원</div>";
								echo "</br>";
							}
				?>
						<div class='calender_total_left'>합계</div><div class='calender_total_right'><?php echo number_format($totalPrice); ?>원</div>
					</td>
				<?php
						} else {
							echo "<td></td>";
						}

						$day++;
						if($i%7 == 6) echo "</tr>"; 
					}
				?>
				</thead>
				<tbody>
			
				</tbody>
			</table>
		</div><!--/* panel -->
	</div><!-- contents-wrapper2 -->
	<!--/* 해당 월 일별 합계  --------------------------------------------------------------------------------------------------------------------->

</div><!-- container -->

<div style="clear:both;"></div>